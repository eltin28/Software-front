<div class="carrito-container">
  <!-- Sección principal: Lista de productos -->
  <div class="carrito-main">
    <h2 class="titulo">Tu Carrito</h2>

    <ul class="carrito-lista">
      @for (item of listaCarrito(); track item.detalleCarritoDTO.idProducto) {
      <li class="carrito-item">
        <img [src]="item.imagenProducto" [alt]="item.nombre" class="producto-img" />
        
        <div class="producto-info">
          <h3 class="producto-nombre">{{ item.nombre }}</h3>
          <p class="producto-precio">{{ item.valorUnitario | currency:'USD':'symbol':'1.0-0' }}</p>
        </div>

        <div class="producto-actions">
          <div class="cantidad-control">
            <button class="btn-cantidad" (click)="disminuirCantidad(item)" aria-label="Disminuir cantidad">−</button>
            <span class="cantidad">{{ item.detalleCarritoDTO.cantidad }}</span>
            <button class="btn-cantidad" (click)="aumentarCantidad(item)" aria-label="Aumentar cantidad">+</button>
          </div>
          <button class="btn-eliminar" (click)="eliminarItem(item.detalleCarritoDTO.idProducto)">Eliminar</button>
        </div>
      </li>
      }
    </ul>
  </div>

  <!-- Sidebar: Resumen del pedido -->
  <aside class="carrito-sidebar">
    <h3 class="resumen-titulo">Resumen del pedido</h3>

    <div class="resumen-detalle">
      <div class="resumen-linea">
        <span>Cantidad de productos</span>
        <span class="valor">{{ obtenerCantidadTotal() }}</span>
      </div>
      <div class="resumen-linea total">
        <span>Total</span>
        <span class="valor">{{ carrito()?.total | currency:'USD':'symbol':'1.0-0' }}</span>
      </div>
    </div>

    <button class="btn-pagar" (click)="confirmarPedido()">Confirmar pedido</button>
    <button class="btn-vaciar" (click)="vaciarCarrito()">Vaciar carrito</button>
  </aside>
</div>

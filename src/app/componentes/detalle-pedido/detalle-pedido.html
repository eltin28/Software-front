<div class="pedido-detalle">
  @if (pedido(); as p) {
    <section class="pedido-header">
      <h2 class="pedido-titulo">Pedido #{{ p.idPedido }}</h2>
      <div class="pedido-info">
        <p><strong>Cliente:</strong> {{ p.nombreCliente }}</p>
        <p><strong>Fecha:</strong> {{ p.fechaCompra | date:'mediumDate' }}</p>
        <p class="pedido-total">
          <strong>Total:</strong> {{ p.total | currency:'USD' }}
        </p>
      </div>
    </section>

    <section class="pedido-productos">
      <h3 class="productos-titulo">Productos</h3>
      <div class="productos-grid">
        @for (d of p.detalles; track d.idProducto) {
          <article class="producto-card">
            <img 
              [src]="d.imagenProducto" 
              [alt]="d.nombreProducto" 
              class="producto-imagen"
            />
            <div class="producto-info">
              <h4 class="producto-nombre">{{ d.nombreProducto }}</h4>
              <p class="producto-tipo">{{ d.tipoProducto }}</p>
              <p class="producto-precio">
                {{ d.precioUnitario | currency:'USD' }} × {{ d.cantidad }}
              </p>
              <p class="producto-subtotal">
                Subtotal: <strong>{{ d.subtotal | currency:'USD' }}</strong>
              </p>
            </div>
          </article>
        }
      </div>
    </section>

    <div class="pedido-acciones">
      <button class="btn-pagar" (click)="irAPagar()">Ir a pagar</button>
    </div>
  } @else {
    <p class="pedido-vacio">No se encontró información del pedido.</p>
  }
</div>
